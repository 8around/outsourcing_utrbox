# 032. ì½˜í…ì¸  ìƒì„¸ í˜ì´ì§€ ì½”ë“œ í’ˆì§ˆ ê°œì„  ë° API ë ˆì´ì–´ ë¶„ë¦¬

## ğŸ“‹ ê°œìš”

**ëª©ì **: `app/admin/contents/[id]/page.tsx`ì˜ ë°ì´í„° ì¡°íšŒ ë¡œì§ì„ ê¸°ì¡´ í”„ë¡œì íŠ¸ ì»¨ë²¤ì…˜ì— ë§ê²Œ API ë ˆì´ì–´ë¡œ ë¶„ë¦¬í•˜ì—¬ ì½”ë“œ í’ˆì§ˆê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

**ì‘ì—… ì¼ì**: 2025-11-04
**ì‘ì—… ë²”ìœ„**: íƒ€ì… ì •ì˜ í™•ì¥, API í•¨ìˆ˜ ìƒì„±, ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§

---

## ğŸ” í˜„ì¬ ìƒíƒœ ë¶„ì„

### 1. í˜„ì¬ ì½”ë“œì˜ ë¬¸ì œì 

#### **ê´€ì‹¬ì‚¬ ë¶„ë¦¬ ìœ„ë°˜**
```typescript
// âŒ í˜„ì¬: ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§ì ‘ Supabase ì¿¼ë¦¬ ì‘ì„± (Line 96-161)
const fetchData = async () => {
  const { data: contentData, error: contentError } = await supabase
    .from('contents')
    .select(`
      id,
      file_name,
      file_path,
      is_analyzed,
      message,
      label_data,
      text_data,
      created_at,
      users!contents_user_id_fkey(name),
      collections(name)
    `)
    .eq('id', contentId)
    .single()

  // ë°ì´í„° ë³€í™˜ ë¡œì§
  setContent({
    ...contentData,
    user_name: contentData.users?.name ?? null,
    collection_name: contentData.collections?.name ?? null,
  })

  // detected_contents ì¡°íšŒ
  const { data: detectionsData, error: detectionsError } = await supabase
    .from('detected_contents')
    .select('*')
    .eq('content_id', contentId)
    .order('created_at', { ascending: false })

  setDetections(detectionsData || [])
}
```

**ë¬¸ì œ:**
- ì»´í¬ë„ŒíŠ¸ê°€ UI ë¡œì§ + ë°ì´í„° ë ˆì´ì–´ + ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ëª¨ë‘ ë‹´ë‹¹
- ì¿¼ë¦¬ ë¡œì§ì´ ì»´í¬ë„ŒíŠ¸ì— ê°•ê²°í•©ë˜ì–´ ì¬ì‚¬ìš© ë¶ˆê°€ëŠ¥
- í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€ (ì»´í¬ë„ŒíŠ¸ì™€ ë°ì´í„° ë¡œì§ ë¶„ë¦¬ ë¶ˆê°€)

#### **í”„ë¡œì íŠ¸ ì»¨ë²¤ì…˜ ë¶ˆì¼ì¹˜**

ë‹¤ë¥¸ ì–´ë“œë¯¼ í˜ì´ì§€ë“¤ì€ ëª¨ë‘ `lib/api/*.ts` í•¨ìˆ˜ë¥¼ ì‚¬ìš©:

```typescript
// âœ… app/admin/users/[id]/page.tsx (Line 58-82)
const userResult = await getUser(userId)
if (userResult.success && userResult.data) {
  setUser(userResult.data)
}

// âœ… app/admin/users/page.tsx (Line 29-35)
const result = await getUsersWithPagination({
  page: userFilters.page,
  pageSize: 10,
  search: userFilters.search,
  is_approved: userFilters.is_approved,
  role: userFilters.role,
})
```

í•˜ì§€ë§Œ ì½˜í…ì¸  ìƒì„¸ í˜ì´ì§€ë§Œ ì§ì ‘ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ **ì¼ê´€ì„±ì´ ì—†ìŒ**.

#### **íƒ€ì… ì •ì˜ ì¤‘ë³µ**

```typescript
// âŒ app/admin/contents/[id]/page.tsx (Line 27-51)
type Content = {
  id: string
  file_name: string
  file_path: string
  is_analyzed: boolean | null
  message: string | null
  label_data: { labels?: { description: string; score: number }[] } | null
  text_data: { text?: string; words?: string[] } | null
  created_at: string
  user_name: string | null
  collection_name: string | null
}

type DetectedContent = {
  id: string
  content_id: string
  source_url: string | null
  image_url: string
  page_title: string | null
  detection_type: string
  admin_review_status: string | null
  created_at: string | null
  reviewed_at: string | null
  reviewed_by: string | null
}
```

**ë¬¸ì œ:**
- `types/content.ts`ì— ì´ë¯¸ Content íƒ€ì…ì´ ì¡´ì¬í•˜ì§€ë§Œ êµ¬ì¡°ê°€ ë‹¤ë¦„
- `types/detection.ts`ì— ì´ë¯¸ DetectedContent íƒ€ì…ì´ ì¡´ì¬í•˜ì§€ë§Œ ì¤‘ë³µ ì •ì˜
- íƒ€ì… ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

### 2. ê¸°ì¡´ API í•¨ìˆ˜ íŒ¨í„´ ë¶„ì„

í”„ë¡œì íŠ¸ì˜ í‘œì¤€ API í•¨ìˆ˜ íŒ¨í„´:

```typescript
// lib/api/users.ts (Line 107-136)
/**
 * íŠ¹ì • ì‚¬ìš©ìë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
 * @param id - ì‚¬ìš©ì ID
 * @returns ApiResponse<User> - ì‚¬ìš©ì ë˜ëŠ” ì—ëŸ¬
 */
export async function getUser(id: string): Promise<ApiResponse<User>> {
  try {
    const { data, error } = await supabase
      .from('users')
      .select('*')
      .eq('id', id)
      .single()

    if (error) {
      return {
        data: null,
        error: error.message,
        success: false,
      }
    }

    return {
      data: data as User,
      error: null,
      success: true,
    }
  } catch (error) {
    console.error('ì‚¬ìš©ì ì¡°íšŒ ì¤‘ ì˜¤ë¥˜:', error)
    return {
      data: null,
      error: 'ì‚¬ìš©ìë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
      success: false,
    }
  }
}
```

**ê³µí†µ íŒ¨í„´:**
1. âœ… JSDoc ì£¼ì„ìœ¼ë¡œ í•¨ìˆ˜ ë¬¸ì„œí™”
2. âœ… `ApiResponse<T>` ë˜ëŠ” `PaginatedApiResponse<T>` íƒ€ì… ì‚¬ìš©
3. âœ… try-catch ë¸”ë¡ìœ¼ë¡œ ì—ëŸ¬ ì²˜ë¦¬
4. âœ… `{ data, error, success }` êµ¬ì¡°ì˜ ì¼ê´€ëœ ì‘ë‹µ í˜•ì‹
5. âœ… ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ lib/api ë ˆì´ì–´ì— ë¶„ë¦¬

---

## ğŸ¯ ê°œì„  ê³„íš

### Phase 1: íƒ€ì… ì‹œìŠ¤í…œ ê°œì„ 

#### 1.1. types/content.ts í™•ì¥

**ëª©í‘œ**: Google Vision API ì‘ë‹µ êµ¬ì¡°ë¥¼ ëª…í™•í•˜ê²Œ ì •ì˜í•˜ê³ , ê´€ë¦¬ì í˜ì´ì§€ìš© í™•ì¥ íƒ€ì… ì¶”ê°€

```typescript
// types/content.tsì— ì¶”ê°€

// Google Vision API LABEL_DETECTION ê²°ê³¼ íƒ€ì…
export interface LabelData {
  labels?: Array<{
    description: string
    score: number
  }>
}

// Google Vision API TEXT_DETECTION ê²°ê³¼ íƒ€ì…
export interface TextData {
  text?: string
  words?: string[]
}

// ê¸°ì¡´ Content íƒ€ì… ê°œì„  (label_data, text_data íƒ€ì… êµ¬ì²´í™”)
export interface Content {
  id: string
  user_id: string
  collection_id: string | null
  file_name: string
  file_path: string
  is_analyzed: boolean | null
  message: string | null
  label_data: LabelData | null  // â† êµ¬ì²´í™”
  text_data: TextData | null    // â† êµ¬ì²´í™”
  created_at: string
  updated_at: string
}

// ê´€ë¦¬ì ìƒì„¸ í˜ì´ì§€ìš© í™•ì¥ íƒ€ì…
export interface ContentDetail extends Content {
  user_name?: string | null
  collection_name?: string | null
  detected_count?: number
}
```

**íš¨ê³¼:**
- âœ… íƒ€ì… ì•ˆì „ì„± ê°•í™” (label_data, text_data êµ¬ì¡° ëª…í™•í™”)
- âœ… ê¸°ì¡´ Content íƒ€ì… í˜¸í™˜ì„± ìœ ì§€
- âœ… í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡° (ContentDetail)
- âœ… ì¤‘ë³µ íƒ€ì… ì •ì˜ ì œê±°

### Phase 2: API ë ˆì´ì–´ êµ¬ì¶•

#### 2.1. lib/api/contents.tsì— getContentDetail í•¨ìˆ˜ ì¶”ê°€

**ëª©í‘œ**: ê´€ë¦¬ì ìƒì„¸ í˜ì´ì§€ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì¡°íšŒí•˜ëŠ” API í•¨ìˆ˜ ìƒì„±

```typescript
// lib/api/contents.tsì— ì¶”ê°€

import { ContentDetail } from '@/types'

/**
 * ê´€ë¦¬ììš© ì½˜í…ì¸  ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤ (users, collections JOIN í¬í•¨).
 * @param id - ì½˜í…ì¸  ID
 * @returns ApiResponse<ContentDetail> - ì½˜í…ì¸  ìƒì„¸ ì •ë³´ ë˜ëŠ” ì—ëŸ¬
 */
export async function getContentDetail(id: string): Promise<ApiResponse<ContentDetail>> {
  try {
    const { data, error } = await supabase
      .from('contents')
      .select(`
        *,
        users!contents_user_id_fkey(name),
        collections(name)
      `)
      .eq('id', id)
      .single()

    if (error) {
      return {
        data: null,
        error: error.message,
        success: false,
      }
    }

    if (!data) {
      return {
        data: null,
        error: 'ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
        success: false,
      }
    }

    // JOIN ê²°ê³¼ë¥¼ ContentDetail í˜•ì‹ìœ¼ë¡œ ë³€í™˜
    const contentDetail: ContentDetail = {
      ...data,
      user_name: data.users && typeof data.users === 'object' && 'name' in data.users
        ? data.users.name
        : null,
      collection_name: data.collections && typeof data.collections === 'object' && 'name' in data.collections
        ? data.collections.name
        : null,
    }

    return {
      data: contentDetail,
      error: null,
      success: true,
    }
  } catch (error) {
    console.error('ì½˜í…ì¸  ìƒì„¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜:', error)
    return {
      data: null,
      error: 'ì½˜í…ì¸ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
      success: false,
    }
  }
}
```

**íŠ¹ì§•:**
- âœ… ê¸°ì¡´ API íŒ¨í„´ê³¼ ì™„ë²½íˆ ì¼ì¹˜
- âœ… try-catch ì—ëŸ¬ ì²˜ë¦¬
- âœ… JSDoc ì£¼ì„
- âœ… í‘œì¤€ ApiResponse ë˜í•‘
- âœ… íƒ€ì… ì•ˆì „ì„± (ContentDetail)
- âœ… JOIN ë¡œì§ ìº¡ìŠí™”

#### 2.2. lib/api/detections.ts í™œìš©

ì´ë¯¸ ì¡´ì¬í•˜ëŠ” `getDetections()` í•¨ìˆ˜ í™œìš©:

```typescript
// lib/api/detections.ts (Line 62-93) - ì´ë¯¸ ì¡´ì¬
/**
 * íŠ¹ì • ì½˜í…ì¸ ì˜ íƒì§€ ê²°ê³¼ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
 * @param contentId - ì½˜í…ì¸  ID
 * @returns ApiResponse<DetectedContent[]> - íƒì§€ ê²°ê³¼ ëª©ë¡ ë˜ëŠ” ì—ëŸ¬
 */
export async function getDetections(
  contentId: string
): Promise<ApiResponse<DetectedContent[]>> {
  // ... êµ¬í˜„ë˜ì–´ ìˆìŒ
}
```

**ì¬ì‚¬ìš©:**
- âœ… ì¶”ê°€ ì‘ì—… ë¶ˆí•„ìš”
- âœ… í‘œì¤€ íŒ¨í„´ ì¤€ìˆ˜

### Phase 3: ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§

#### 3.1. íƒ€ì… import ë³€ê²½

```typescript
// Before
type Content = { ... }
type DetectedContent = { ... }

// After
import { ContentDetail } from '@/types'
import { DetectedContent } from '@/types'
```

#### 3.2. fetchData() í•¨ìˆ˜ ë‹¨ìˆœí™”

**Before (í˜„ì¬ - ì•½ 65ì¤„):**

```typescript
const fetchData = async () => {
  setIsLoading(true)

  try {
    // contents ì¡°íšŒ
    const { data: contentData, error: contentError } = await supabase
      .from('contents')
      .select(`
        id,
        file_name,
        file_path,
        is_analyzed,
        message,
        label_data,
        text_data,
        created_at,
        users!contents_user_id_fkey(name),
        collections(name)
      `)
      .eq('id', contentId)
      .single()

    if (contentError) throw contentError

    if (!contentData) {
      setContent(null)
      return
    }

    setContent({
      ...contentData,
      user_name:
        contentData.users && typeof contentData.users === 'object' && 'name' in contentData.users
          ? contentData.users.name
          : null,
      collection_name:
        contentData.collections &&
        typeof contentData.collections === 'object' &&
        'name' in contentData.collections
          ? contentData.collections.name
          : null,
    } as Content)

    // detected_contents ì¡°íšŒ
    const { data: detectionsData, error: detectionsError } = await supabase
      .from('detected_contents')
      .select('*')
      .eq('content_id', contentId)
      .order('created_at', { ascending: false })

    if (detectionsError) throw detectionsError

    setDetections(detectionsData || [])
  } catch (error) {
    console.error('ë°ì´í„° ì¡°íšŒ ì—ëŸ¬:', error)
    toast({
      title: 'ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨',
      description: 'ì½˜í…ì¸  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
      variant: 'destructive',
    })
  } finally {
    setIsLoading(false)
  }
}
```

**After (ë¦¬íŒ©í† ë§ - ì•½ 30ì¤„):**

```typescript
const fetchData = async () => {
  setIsLoading(true)

  try {
    // ì½˜í…ì¸  ìƒì„¸ ì¡°íšŒ (API í•¨ìˆ˜ ì‚¬ìš©)
    const contentResult = await getContentDetail(contentId)
    if (!contentResult.success || !contentResult.data) {
      throw new Error(contentResult.error || 'ì½˜í…ì¸ ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')
    }
    setContent(contentResult.data)

    // íƒì§€ ê²°ê³¼ ì¡°íšŒ (API í•¨ìˆ˜ ì‚¬ìš©)
    const detectionsResult = await getDetections(contentId)
    if (!detectionsResult.success) {
      throw new Error(detectionsResult.error || 'íƒì§€ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')
    }
    setDetections(detectionsResult.data || [])
  } catch (error) {
    console.error('ë°ì´í„° ì¡°íšŒ ì—ëŸ¬:', error)
    toast({
      title: 'ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨',
      description: error instanceof Error ? error.message : 'ì½˜í…ì¸  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
      variant: 'destructive',
    })
  } finally {
    setIsLoading(false)
  }
}
```

**ê°œì„  íš¨ê³¼:**
- ğŸ“‰ ì½”ë“œ ë¼ì¸ ìˆ˜: 65ì¤„ â†’ 30ì¤„ (54% ê°ì†Œ)
- âœ… ê´€ì‹¬ì‚¬ ë¶„ë¦¬: UI ë¡œì§ vs ë°ì´í„° ë¡œì§
- âœ… ì¬ì‚¬ìš©ì„±: API í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ ê³³ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥
- âœ… í…ŒìŠ¤íŠ¸ ìš©ì´ì„±: API í•¨ìˆ˜ ë‹¨ë… í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- âœ… ìœ ì§€ë³´ìˆ˜ì„±: ì¿¼ë¦¬ ë³€ê²½ ì‹œ API ë ˆì´ì–´ë§Œ ìˆ˜ì •

#### 3.3. import ì •ë¦¬

```typescript
// ì¶”ê°€
import { getContentDetail } from '@/lib/api/contents'
import { getDetections } from '@/lib/api/detections'
import { ContentDetail, DetectedContent } from '@/types'

// ì œê±°
import { supabase } from '@/lib/supabase/client'  // â† ë” ì´ìƒ ì§ì ‘ ì‚¬ìš© ì•ˆ í•¨
```

---

## ğŸ“Š ê°œì„  íš¨ê³¼ ìš”ì•½

### ì½”ë“œ í’ˆì§ˆ ì§€í‘œ

| í•­ëª© | Before | After | ê°œì„ ìœ¨ |
|------|--------|-------|--------|
| ì»´í¬ë„ŒíŠ¸ ë¼ì¸ ìˆ˜ | 495ì¤„ | ~460ì¤„ | -7% |
| fetchData í•¨ìˆ˜ ë¼ì¸ ìˆ˜ | 65ì¤„ | 30ì¤„ | -54% |
| íƒ€ì… ì •ì˜ ì¤‘ë³µ | 2ê³³ | 0ê³³ | -100% |
| ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í•¨ìˆ˜ | 0ê°œ | 2ê°œ | +âˆ |
| ì§ì ‘ DB ì¿¼ë¦¬ | 2ê³³ | 0ê³³ | -100% |

### ì•„í‚¤í…ì²˜ ê°œì„ 

#### Before (í˜„ì¬)
```
[Component]
  â”œâ”€ UI Logic âœ“
  â”œâ”€ State Management âœ“
  â”œâ”€ Data Fetching âœ— (ì§ì ‘ Supabase ì¿¼ë¦¬)
  â”œâ”€ Data Transformation âœ— (JOIN ê²°ê³¼ ë³€í™˜)
  â””â”€ Error Handling âœ“
```

#### After (ê°œì„ )
```
[Component]
  â”œâ”€ UI Logic âœ“
  â”œâ”€ State Management âœ“
  â””â”€ API Function Calls âœ“

[API Layer]
  â”œâ”€ Data Fetching âœ“ (lib/api/contents.ts)
  â”œâ”€ Data Transformation âœ“
  â”œâ”€ Error Handling âœ“
  â””â”€ Response Wrapping âœ“
```

### ì£¼ìš” ì´ì 

1. **ê´€ì‹¬ì‚¬ ë¶„ë¦¬ (Separation of Concerns)**
   - âœ… ì»´í¬ë„ŒíŠ¸: UI ë¡œì§ê³¼ ìƒíƒœ ê´€ë¦¬ë§Œ ë‹´ë‹¹
   - âœ… API ë ˆì´ì–´: ë°ì´í„° ì¡°íšŒ ë° ë³€í™˜ ë‹´ë‹¹
   - âœ… íƒ€ì… ë ˆì´ì–´: íƒ€ì… ì •ì˜ ì¤‘ì•™í™”

2. **ì¬ì‚¬ìš©ì„± (Reusability)**
   - âœ… `getContentDetail()` í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥
   - âœ… ë™ì¼í•œ ë°ì´í„°ê°€ í•„ìš”í•œ ê³³ì—ì„œ ë³µì‚¬-ë¶™ì—¬ë„£ê¸° ë¶ˆí•„ìš”

3. **í…ŒìŠ¤íŠ¸ ìš©ì´ì„± (Testability)**
   - âœ… API í•¨ìˆ˜ ë‹¨ë… ìœ ë‹› í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
   - âœ… ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì‹œ API í•¨ìˆ˜ ëª¨í‚¹ ê°€ëŠ¥
   - âœ… ê²°í•©ë„ ê°ì†Œë¡œ í…ŒìŠ¤íŠ¸ ì‘ì„± ìš©ì´

4. **ìœ ì§€ë³´ìˆ˜ì„± (Maintainability)**
   - âœ… ì¿¼ë¦¬ ìˆ˜ì • ì‹œ API ë ˆì´ì–´ë§Œ ë³€ê²½
   - âœ… ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ê°€ ë™ì¼ í•¨ìˆ˜ ì‚¬ìš© ì‹œ í•œ ê³³ë§Œ ìˆ˜ì •
   - âœ… íƒ€ì… ë³€ê²½ ì‹œ types/ ë””ë ‰í„°ë¦¬ë§Œ ìˆ˜ì •

5. **ì¼ê´€ì„± (Consistency)**
   - âœ… ëª¨ë“  ì–´ë“œë¯¼ í˜ì´ì§€ê°€ ë™ì¼í•œ API íŒ¨í„´ ì‚¬ìš©
   - âœ… í”„ë¡œì íŠ¸ ì»¨ë²¤ì…˜ ì¤€ìˆ˜
   - âœ… ìƒˆë¡œìš´ ê°œë°œì ì˜¨ë³´ë”© ìš©ì´

6. **íƒ€ì… ì•ˆì „ì„± (Type Safety)**
   - âœ… label_data, text_data êµ¬ì¡° ëª…í™•í™”
   - âœ… ContentDetail íƒ€ì…ìœ¼ë¡œ í™•ì¥ í•„ë“œ ëª…ì‹œ
   - âœ… ì»´íŒŒì¼ íƒ€ì„ íƒ€ì… ì²´í¬ ê°•í™”

---

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ë‹¨ê³„

### Step 1: íƒ€ì… ì •ì˜ í™•ì¥
```bash
# ì‘ì—… íŒŒì¼: types/content.ts
# ì‘ì—… ë‚´ìš©: LabelData, TextData, ContentDetail íƒ€ì… ì¶”ê°€
```

### Step 2: API í•¨ìˆ˜ ìƒì„±
```bash
# ì‘ì—… íŒŒì¼: lib/api/contents.ts
# ì‘ì—… ë‚´ìš©: getContentDetail() í•¨ìˆ˜ ì¶”ê°€
```

### Step 3: ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§
```bash
# ì‘ì—… íŒŒì¼: app/admin/contents/[id]/page.tsx
# ì‘ì—… ë‚´ìš©:
# - íƒ€ì… import ë³€ê²½
# - fetchData() í•¨ìˆ˜ ë‹¨ìˆœí™”
# - ë¶ˆí•„ìš”í•œ import ì œê±° (supabase)
```

### Step 4: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
```bash
# 1. ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# 2. ì½˜í…ì¸  ìƒì„¸ í˜ì´ì§€ ì ‘ì†
# http://localhost:3000/admin/contents/[id]

# 3. ê¸°ëŠ¥ ê²€ì¦
# - ì½˜í…ì¸  ì •ë³´ ì •ìƒ í‘œì‹œ
# - íƒì§€ ê²°ê³¼ ì •ìƒ í‘œì‹œ
# - ì—ëŸ¬ ì²˜ë¦¬ ë™ì‘ í™•ì¸
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. í˜¸í™˜ì„±
- âœ… ê¸°ì¡´ UI/UX ë³€ê²½ ì—†ìŒ
- âœ… ê¸°ì¡´ ê¸°ëŠ¥ 100% ìœ ì§€
- âœ… ì„±ëŠ¥ ì €í•˜ ì—†ìŒ (ë™ì¼í•œ ì¿¼ë¦¬)
- âœ… ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ ì˜í–¥ ì—†ìŒ

### 2. ì•ˆì „í•œ ë§ˆì´ê·¸ë ˆì´ì…˜
- âš ï¸ íƒ€ì… ë³€ê²½ í›„ ì „ì²´ í”„ë¡œì íŠ¸ íƒ€ì… ì²´í¬ í•„ìš”
- âš ï¸ API í•¨ìˆ˜ ì¶”ê°€ í›„ ê¸°ì¡´ í•¨ìˆ˜ì™€ ì¶©ëŒ í™•ì¸
- âš ï¸ ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§ ì „ ë°±ì—… ê¶Œì¥

### 3. ì¶”ê°€ ê°œì„  ê°€ëŠ¥ì„±
- ğŸ’¡ ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œë„ ë™ì¼í•œ íŒ¨í„´ ì ìš© ê²€í† 
- ğŸ’¡ API í•¨ìˆ˜ì— ìºì‹± ì¶”ê°€ ê²€í†  (React Query, SWR ë“±)
- ğŸ’¡ ì—ëŸ¬ ì²˜ë¦¬ ì¤‘ì•™í™” ê²€í†  (ì—ëŸ¬ ë°”ìš´ë”ë¦¬)

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê°œë°œ ì „
- [ ] types/content.ts íŒŒì¼ ë°±ì—…
- [ ] lib/api/contents.ts íŒŒì¼ ë°±ì—…
- [ ] app/admin/contents/[id]/page.tsx íŒŒì¼ ë°±ì—…
- [ ] í˜„ì¬ ê¸°ëŠ¥ ë™ì‘ í™•ì¸ ë° ìŠ¤í¬ë¦°ìƒ·

### ê°œë°œ ì¤‘
- [ ] types/content.tsì— LabelData, TextData, ContentDetail íƒ€ì… ì¶”ê°€
- [ ] lib/api/contents.tsì— getContentDetail() í•¨ìˆ˜ ì¶”ê°€
- [ ] ì»´í¬ë„ŒíŠ¸ íƒ€ì… import ë³€ê²½
- [ ] fetchData() í•¨ìˆ˜ ë¦¬íŒ©í† ë§
- [ ] ë¶ˆí•„ìš”í•œ import ì œê±°
- [ ] TypeScript ì»´íŒŒì¼ ì—ëŸ¬ í•´ê²°

### ê°œë°œ í›„
- [ ] íƒ€ì… ì²´í¬ í†µê³¼ (`npm run type-check`)
- [ ] ë¦°íŠ¸ í†µê³¼ (`npm run lint`)
- [ ] ì½˜í…ì¸  ìƒì„¸ í˜ì´ì§€ ì •ìƒ ë™ì‘ í™•ì¸
- [ ] ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- [ ] ë‹¤ë¥¸ í˜ì´ì§€ ì˜í–¥ ì—†ìŒ í™•ì¸
- [ ] ì½”ë“œ ë¦¬ë·° ìš”ì²­

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê¸°ì¡´ API í•¨ìˆ˜ ì˜ˆì‹œ
- `lib/api/users.ts`: `getUser()`, `getUsersWithPagination()`
- `lib/api/contents.ts`: `getContent()`, `getContentsWithPagination()`
- `lib/api/detections.ts`: `getDetections()`, `getDetectionCount()`

### ê¸°ì¡´ í˜ì´ì§€ ì˜ˆì‹œ
- `app/admin/users/[id]/page.tsx`: API í•¨ìˆ˜ í™œìš© ì¢‹ì€ ì˜ˆì‹œ
- `app/admin/users/page.tsx`: í˜ì´ì§€ë„¤ì´ì…˜ API í•¨ìˆ˜ í™œìš© ì˜ˆì‹œ
- `app/admin/contents/page.tsx`: ì»¨í…ì¸  ëª©ë¡ API í•¨ìˆ˜ í™œìš© ì˜ˆì‹œ

### íƒ€ì… ì •ì˜ ìœ„ì¹˜
- `types/content.ts`: Content ê´€ë ¨ íƒ€ì…
- `types/detection.ts`: DetectedContent ê´€ë ¨ íƒ€ì…
- `types/user.ts`: User ê´€ë ¨ íƒ€ì…
- `types/index.ts`: ì¤‘ì•™ export

---

## ê²°ë¡ 

ì´ ê°œì„  ì‘ì—…ì„ í†µí•´:
1. âœ… í”„ë¡œì íŠ¸ ì»¨ë²¤ì…˜ì„ ì¤€ìˆ˜í•˜ê²Œ ë¨
2. âœ… ì½”ë“œ í’ˆì§ˆê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í¬ê²Œ í–¥ìƒë¨
3. âœ… ì¬ì‚¬ìš© ê°€ëŠ¥í•œ API í•¨ìˆ˜ê°€ ì¶”ê°€ë¨
4. âœ… íƒ€ì… ì•ˆì „ì„±ì´ ê°•í™”ë¨
5. âœ… í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì´ ì¦ê°€í•¨

**ì‹œê°„ì´ ë§ì´ ì†Œìš”ë˜ë”ë¼ë„ ì´ ê°œì„  ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì¥ê¸°ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ì˜ ê±´ê°•ì„±ê³¼ ìƒì‚°ì„±ì— í° ë„ì›€ì´ ë©ë‹ˆë‹¤.**
