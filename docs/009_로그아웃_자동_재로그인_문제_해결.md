# 009_ë¡œê·¸ì•„ì›ƒ_ìë™_ì¬ë¡œê·¸ì¸_ë¬¸ì œ_í•´ê²°

## ğŸ“‹ ê°œìš”

**ì‘ì„±ì¼**: 2025-10-25
**ëª©ì **: ë¡œê·¸ì•„ì›ƒ í›„ ìë™ìœ¼ë¡œ ì¬ë¡œê·¸ì¸ë˜ëŠ” ì‹¬ê°í•œ ë³´ì•ˆ ë¬¸ì œ í•´ê²°
**ì´ì „ ë¬¸ì„œ**: 008 ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦ ë¬¸ì œ í•´ê²° í›„ ë°œê²¬ëœ ì¶”ê°€ ë¬¸ì œ

---

## ğŸ”´ ë¬¸ì œ í˜„ìƒ

### ë°œìƒ ìƒí™©
1. ì‚¬ìš©ìê°€ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í´ë¦­
2. ë¡œê·¸ì¸ í˜ì´ì§€(/login)ë¡œ ì´ë™
3. **ì¦‰ì‹œ ì¿ í‚¤ì— ë¡œê·¸ì¸ ì •ë³´ê°€ ë‹¤ì‹œ ìƒì„±ë¨**
4. ìë™ìœ¼ë¡œ /dashboardë¡œ ë¦¬ë””ë ‰íŠ¸ë¨

### ì‹¬ê°ë„
**ğŸ”´ CRITICAL** - ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ë¡œê·¸ì•„ì›ƒí•  ìˆ˜ ì—†ëŠ” ë³´ì•ˆ ë¬¸ì œ

---

## ğŸ” ê·¼ë³¸ ì›ì¸ ë¶„ì„

### í˜„ì¬ ì¸ì¦ ì‹œìŠ¤í…œ êµ¬ì¡°

#### ë¡œê·¸ì¸ í”Œë¡œìš° (ì •ìƒ ì‘ë™)
```
ì‚¬ìš©ì ì…ë ¥ (LoginForm.tsx:48-57)
    â†“
fetch('/api/auth/login')
    â†“
ì„œë²„: createServerClient â†’ signInUser â†’ ì¿ í‚¤ ì„¤ì •
    â†“
ì‘ë‹µ: { success: true, data: { user: {...} } }
    â†“
authStore.login(userData) â†’ localStorage ì €ì¥
    â†“
router.push('/dashboard')
```

**íŒŒì¼ ìœ„ì¹˜**:
- `components/auth/LoginForm.tsx:44-94` - ë¡œê·¸ì¸ í¼ ì œì¶œ í•¸ë“¤ëŸ¬
- `app/api/auth/login/route.ts:6-85` - ë¡œê·¸ì¸ API ì—”ë“œí¬ì¸íŠ¸
- `lib/supabase/auth.ts:188-277` - signInUser í—¬í¼ í•¨ìˆ˜
- `lib/stores/authStore.ts:13-29` - Zustand ìƒíƒœ ê´€ë¦¬

#### ë¡œê·¸ì•„ì›ƒ í”Œë¡œìš° (ë¬¸ì œ ë°œìƒ)
```
ì‚¬ìš©ì í´ë¦­ (Header.tsx:26-29)
    â†“
authStore.logout() â†’ localStorageë§Œ ì‚­ì œ
    â†“
window.location.href = '/login'
    â†“
ğŸ”´ ì„œë²„ ì¿ í‚¤ëŠ” ì—¬ì „íˆ ìœ íš¨í•¨
    â†“
ë¯¸ë“¤ì›¨ì–´ ì‹¤í–‰ (middleware.ts:30-37)
    â†“
supabase.auth.getUser() â†’ ì¿ í‚¤ë¡œ ì‚¬ìš©ì ì¸ì¦ ì„±ê³µ
    â†“
NextResponse.redirect('/dashboard') â† ìë™ ë¦¬ë””ë ‰íŠ¸!
```

**íŒŒì¼ ìœ„ì¹˜**:
- `components/layout/Header.tsx:26-29` - ë¡œê·¸ì•„ì›ƒ í•¸ë“¤ëŸ¬
- `lib/stores/authStore.ts:19` - logout í•¨ìˆ˜ (localStorageë§Œ ì •ë¦¬)
- `middleware.ts:30-42` - ì¸ì¦ í™•ì¸ ë° ë¦¬ë””ë ‰íŠ¸ ë¡œì§

### í•µì‹¬ ë¬¸ì œì 

**ë¹„ëŒ€ì¹­ì  êµ¬í˜„**:
| ì‘ì—… | ì„œë²„ API í˜¸ì¶œ | localStorage | ì¿ í‚¤ |
|------|--------------|--------------|------|
| ë¡œê·¸ì¸ | âœ… `/api/auth/login` | âœ… ì €ì¥ | âœ… ì„¤ì • |
| ë¡œê·¸ì•„ì›ƒ | âŒ **í˜¸ì¶œ ì•ˆ í•¨** | âœ… ì‚­ì œ | âŒ **ìœ ì§€ë¨** |

**ë¬¸ì œì˜ ì—°ì‡„ ë°˜ì‘**:
1. localStorageëŠ” ì‚­ì œë¨ â†’ authStore.user = null
2. í•˜ì§€ë§Œ HTTP ì¿ í‚¤ëŠ” ë¸Œë¼ìš°ì €ì— ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆìŒ
3. `/login` í˜ì´ì§€ ì ‘ê·¼ ì‹œ ë¯¸ë“¤ì›¨ì–´ê°€ ë¨¼ì € ì‹¤í–‰ë¨
4. ë¯¸ë“¤ì›¨ì–´ê°€ ì¿ í‚¤ë¥¼ ì½ì–´ `supabase.auth.getUser()` í˜¸ì¶œ
5. ìœ íš¨í•œ ì„¸ì…˜ì´ í™•ì¸ë˜ì–´ `/dashboard`ë¡œ ë¦¬ë””ë ‰íŠ¸
6. ì‚¬ìš©ìëŠ” ë¡œê·¸ì•„ì›ƒí–ˆë‹¤ê³  ìƒê°í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì—¬ì „íˆ ë¡œê·¸ì¸ ìƒíƒœ

---

## âœ… í•´ê²° ë°©ì•ˆ

### Phase 1: ë¡œê·¸ì•„ì›ƒ API í˜¸ì¶œ ì¶”ê°€

#### ìˆ˜ì • ëŒ€ìƒ íŒŒì¼
**`components/layout/Header.tsx`** (line 26-29)

#### í˜„ì¬ ì½”ë“œ
```typescript
const handleLogout = () => {
  logout()  // authStore.logout()ë§Œ í˜¸ì¶œ
  window.location.href = '/login'
}
```

#### ìˆ˜ì • í›„ ì½”ë“œ
```typescript
const handleLogout = async () => {
  try {
    // 1. ì„œë²„ ë¡œê·¸ì•„ì›ƒ API í˜¸ì¶œ (ì¿ í‚¤ ì‚­ì œ)
    const response = await fetch('/api/auth/logout', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
    })

    const result = await response.json()

    if (!result.success) {
      console.error('Logout API failed:', result.error)
    }
  } catch (error) {
    console.error('Logout error:', error)
  } finally {
    // 2. API ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ë¡œì»¬ ìƒíƒœ ì •ë¦¬
    logout()

    // 3. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰íŠ¸
    window.location.href = '/login'
  }
}
```

### ìˆ˜ì • ì‚¬í•­ ì„¤ëª…

#### 1. async/await íŒ¨í„´ ì‚¬ìš©
```typescript
const handleLogout = async () => {
```
- ë¹„ë™ê¸° API í˜¸ì¶œì„ ìœ„í•´ async í•¨ìˆ˜ë¡œ ë³€ê²½

#### 2. ì„œë²„ API í˜¸ì¶œ ì¶”ê°€
```typescript
const response = await fetch('/api/auth/logout', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
})
```
- `/api/auth/logout` API í˜¸ì¶œ
- ì„œë²„ì—ì„œ `supabase.auth.signOut()` ì‹¤í–‰
- HTTP ì¿ í‚¤ê°€ ì‚­ì œë¨ (Set-Cookie í—¤ë”ë¡œ)

#### 3. try-catch-finally íŒ¨í„´
```typescript
try {
  // API í˜¸ì¶œ
} catch (error) {
  // ì—ëŸ¬ ë¡œê¹…
} finally {
  // ë°˜ë“œì‹œ ì‹¤í–‰ë˜ëŠ” ì •ë¦¬ ì‘ì—…
  logout()
  window.location.href = '/login'
}
```

**ì¤‘ìš”**: `finally` ë¸”ë¡ ì‚¬ìš© ì´ìœ 
- API í˜¸ì¶œì´ ì‹¤íŒ¨í•´ë„ ì‚¬ìš©ìëŠ” ë¡œê·¸ì•„ì›ƒë˜ì–´ì•¼ í•¨
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ì„œë²„ ì¥ì•  ë“± ìƒê´€ì—†ì´ ë¡œì»¬ ìƒíƒœ ì •ë¦¬ ë³´ì¥
- ì‚¬ìš©ì ê²½í—˜ ë³´í˜¸ (ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ ëˆŒë €ëŠ”ë° ì•„ë¬´ ë°˜ì‘ì´ ì—†ìœ¼ë©´ ì•ˆ ë¨)

### Phase 2: ê¸°ì¡´ ë¡œê·¸ì•„ì›ƒ API í™•ì¸

**`app/api/auth/logout/route.ts`** - ì´ë¯¸ ì •ìƒ ì‘ë™ ì¤‘

```typescript
export async function POST(request: NextRequest) {
  // 1. response ê°ì²´ ìƒì„± (ì¿ í‚¤ ìˆ˜ì§‘ìš©)
  const response = NextResponse.json({})

  // 2. Supabase í´ë¼ì´ì–¸íŠ¸ ìƒì„± (ì¿ í‚¤ ì„¤ì • ê°€ëŠ¥í•˜ë„ë¡)
  const supabase = createServerClient<Database>(...)

  // 3. signOutUser í˜¸ì¶œ â†’ supabase.auth.signOut()
  const result = await signOutUser(supabase)

  // 4. ì¿ í‚¤ ì‚­ì œê°€ í¬í•¨ëœ ì‘ë‹µ ë°˜í™˜
  return NextResponse.json(
    { success: true, message: 'ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.' },
    { status: 200, headers: response.headers }  // ì¿ í‚¤ ì‚­ì œ í—¤ë” í¬í•¨
  )
}
```

**í™•ì¸ ì‚¬í•­**:
- âœ… API ì—”ë“œí¬ì¸íŠ¸ê°€ ì´ë¯¸ ì¡´ì¬í•¨
- âœ… `signOutUser(supabase)` í˜¸ì¶œë¡œ ì„¸ì…˜ ì¢…ë£Œ
- âœ… `response.headers`ë¡œ ì¿ í‚¤ ì‚­ì œ í—¤ë” ì „ë‹¬
- âœ… 008 ë¬¸ì„œì—ì„œ ì´ë¯¸ ìˆ˜ì • ì™„ë£Œ

**ë¬¸ì œëŠ” APIê°€ ì•„ë‹ˆë¼ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì´ APIë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šì€ ê²ƒ!**

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### 1. ë¡œê·¸ì•„ì›ƒ ì¿ í‚¤ ì‚­ì œ í™•ì¸

**ì ˆì°¨**:
1. ë¸Œë¼ìš°ì € DevTools ì—´ê¸° (F12)
2. Application â†’ Cookies â†’ `https://qwwsmuewhiiongjcguta.supabase.co` í™•ì¸
3. ë¡œê·¸ì¸ ìˆ˜í–‰
4. ì¿ í‚¤ ì¡´ì¬ í™•ì¸ (sb-itufjzpbwrlfcyatdahp-auth-token)
5. ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í´ë¦­
6. **Network íƒ­ì—ì„œ `/api/auth/logout` í˜¸ì¶œ í™•ì¸**
7. **Cookiesì—ì„œ ì„¸ì…˜ í† í° ì‚­ì œ í™•ì¸**

**ì˜ˆìƒ ê²°ê³¼**:
- âœ… `/api/auth/logout` POST ìš”ì²­ ë°œìƒ
- âœ… ì‘ë‹µ: `{ success: true, message: 'ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.' }`
- âœ… `sb-itufjzpbwrlfcyatdahp-auth-token` ì¿ í‚¤ ì‚­ì œë¨

### 2. ë¡œê·¸ì¸ í˜ì´ì§€ ìë™ ë¦¬ë””ë ‰íŠ¸ ë°©ì§€ í™•ì¸

**ì ˆì°¨**:
1. ë¡œê·¸ì¸ ìƒíƒœì—ì„œ ë¡œê·¸ì•„ì›ƒ ìˆ˜í–‰
2. `/login` í˜ì´ì§€ë¡œ ì´ë™ë¨
3. **ìë™ìœ¼ë¡œ `/dashboard`ë¡œ ë¦¬ë””ë ‰íŠ¸ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸**
4. ë¡œê·¸ì¸ í¼ì´ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸

**ì˜ˆìƒ ê²°ê³¼**:
- âœ… `/login` í˜ì´ì§€ ìœ ì§€
- âœ… ë¡œê·¸ì¸ í¼ í‘œì‹œ
- âŒ `/dashboard`ë¡œ ìë™ ë¦¬ë””ë ‰íŠ¸ë˜ì§€ ì•ŠìŒ

### 3. ì¬ë¡œê·¸ì¸ ì •ìƒ ì‘ë™ í™•ì¸

**ì ˆì°¨**:
1. ë¡œê·¸ì•„ì›ƒ í›„ ë¡œê·¸ì¸ í¼ì—ì„œ ìê²©ì¦ëª… ì…ë ¥
2. ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
3. `/dashboard`ë¡œ ì´ë™ í™•ì¸
4. ì¿ í‚¤ ì¬ìƒì„± í™•ì¸

**ì˜ˆìƒ ê²°ê³¼**:
- âœ… ë¡œê·¸ì¸ API í˜¸ì¶œ ì„±ê³µ
- âœ… ìƒˆë¡œìš´ ì„¸ì…˜ í† í° ìƒì„±
- âœ… `/dashboard` ì ‘ê·¼ ê°€ëŠ¥

### 4. API ì‹¤íŒ¨ ì‹œ ë™ì‘ í™•ì¸

**ì ˆì°¨**:
1. ê°œë°œì ë„êµ¬ â†’ Network íƒ­
2. Offline ëª¨ë“œ í™œì„±í™”
3. ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í´ë¦­
4. localStorage ì •ë¦¬ ë° ë¦¬ë””ë ‰íŠ¸ í™•ì¸

**ì˜ˆìƒ ê²°ê³¼**:
- âœ… API í˜¸ì¶œ ì‹¤íŒ¨í•´ë„ localStorage ì •ë¦¬ë¨
- âœ… `/login` í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰íŠ¸ë¨
- âœ… ì‚¬ìš©ìê°€ "ê°‡íˆì§€" ì•ŠìŒ

---

## ğŸ“Š Before & After ë¹„êµ

### Before (ë¬¸ì œ ìƒí™©)

```
[ì‚¬ìš©ì] ë¡œê·¸ì•„ì›ƒ í´ë¦­
    â†“
[í´ë¼ì´ì–¸íŠ¸] authStore.logout() â†’ localStorageë§Œ ì‚­ì œ
    â†“
[í´ë¼ì´ì–¸íŠ¸] window.location.href = '/login'
    â†“
[ë¯¸ë“¤ì›¨ì–´] ì¿ í‚¤ë¡œ ì‚¬ìš©ì ì¸ì¦ â†’ ì„¸ì…˜ ìœ íš¨!
    â†“
[ë¯¸ë“¤ì›¨ì–´] NextResponse.redirect('/dashboard')
    â†“
[ê²°ê³¼] ğŸ”´ ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨ (ìë™ ì¬ë¡œê·¸ì¸)
```

### After (ìˆ˜ì • í›„)

```
[ì‚¬ìš©ì] ë¡œê·¸ì•„ì›ƒ í´ë¦­
    â†“
[í´ë¼ì´ì–¸íŠ¸] fetch('/api/auth/logout') â†’ API í˜¸ì¶œ
    â†“
[ì„œë²„] supabase.auth.signOut() â†’ ì„¸ì…˜ ì¢…ë£Œ
    â†“
[ì„œë²„] Set-Cookie: ì¿ í‚¤ ì‚­ì œ í—¤ë” ì „ì†¡
    â†“
[ë¸Œë¼ìš°ì €] ì¿ í‚¤ ì‚­ì œ
    â†“
[í´ë¼ì´ì–¸íŠ¸] authStore.logout() â†’ localStorage ì •ë¦¬
    â†“
[í´ë¼ì´ì–¸íŠ¸] window.location.href = '/login'
    â†“
[ë¯¸ë“¤ì›¨ì–´] ì¿ í‚¤ ì—†ìŒ â†’ ì¸ì¦ ì‹¤íŒ¨
    â†“
[ë¯¸ë“¤ì›¨ì–´] /login í˜ì´ì§€ í‘œì‹œ í—ˆìš©
    â†“
[ê²°ê³¼] âœ… ë¡œê·¸ì•„ì›ƒ ì„±ê³µ
```

---

## ğŸ”— ê´€ë ¨ íŒŒì¼

### ìˆ˜ì • í•„ìš”
- `components/layout/Header.tsx` (line 26-29) - ë¡œê·¸ì•„ì›ƒ í•¸ë“¤ëŸ¬

### í™•ì¸ë§Œ í•„ìš” (ìˆ˜ì • ì—†ìŒ)
- `app/api/auth/logout/route.ts` - ë¡œê·¸ì•„ì›ƒ API (ì´ë¯¸ ì •ìƒ)
- `lib/supabase/auth.ts` (line 282-308) - signOutUser í—¬í¼
- `middleware.ts` (line 30-42) - ì¸ì¦ í™•ì¸ ë¡œì§

### ì°¸ê³ 
- `components/auth/LoginForm.tsx` - ë¡œê·¸ì¸ í”Œë¡œìš° ì°¸ì¡°
- `lib/stores/authStore.ts` - ìƒíƒœ ê´€ë¦¬

---

## ğŸ’¡ í•™ìŠµ í¬ì¸íŠ¸

### 1. í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ë™ê¸°í™” ì¤‘ìš”ì„±
- í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ(localStorage)ì™€ ì„œë²„ ìƒíƒœ(ì¿ í‚¤)ëŠ” í•­ìƒ ë™ê¸°í™”ë˜ì–´ì•¼ í•¨
- í•œìª½ë§Œ ì—…ë°ì´íŠ¸í•˜ë©´ ë¶ˆì¼ì¹˜ ë°œìƒ

### 2. ëŒ€ì¹­ì  API ì„¤ê³„
- ë¡œê·¸ì¸ â†” ë¡œê·¸ì•„ì›ƒ
- ìƒì„± â†” ì‚­ì œ
- ì‹œì‘ â†” ì¢…ë£Œ
- ëŒ€ì¹­ì ìœ¼ë¡œ ì„¤ê³„í•˜ë©´ ë²„ê·¸ ë°©ì§€

### 3. Supabase SSRì˜ ì¿ í‚¤ ë©”ì»¤ë‹ˆì¦˜
```typescript
const supabase = createServerClient<Database>(
  url,
  key,
  {
    cookies: {
      getAll() { return request.cookies.getAll() },
      setAll(cookiesToSet) {
        cookiesToSet.forEach(({ name, value, options }) => {
          response.cookies.set(name, value, options)
        })
      }
    }
  }
)
```

**í•µì‹¬**:
- `signInWithPassword()` â†’ setAll()ë¡œ ì¿ í‚¤ ì„¤ì •
- `signOut()` â†’ setAll()ë¡œ ì¿ í‚¤ ì‚­ì œ (value = '', maxAge = 0)
- response.headersì— Set-Cookie í—¤ë”ê°€ í¬í•¨ë¨
- ë¸Œë¼ìš°ì €ê°€ ì´ í—¤ë”ë¥¼ ì½ì–´ ì¿ í‚¤ ì‚­ì œ

### 4. finally ë¸”ë¡ì˜ ì¤‘ìš”ì„±
```typescript
try {
  await fetch('/api/auth/logout')
} catch (error) {
  console.error(error)
} finally {
  // API ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ì‹¤í–‰
  logout()
  window.location.href = '/login'
}
```

**ì´ìœ **:
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œì—ë„ ì‚¬ìš©ì ë³´í˜¸
- ìµœì†Œí•œ ë¡œì»¬ ìƒíƒœëŠ” ì •ë¦¬ ë³´ì¥
- UX ê°œì„  (ë²„íŠ¼ì´ "ë¨¹í†µ"ë˜ì§€ ì•ŠìŒ)

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. API í˜¸ì¶œ ìˆœì„œ
```typescript
// âœ… ì˜¬ë°”ë¥¸ ìˆœì„œ
await fetch('/api/auth/logout')  // ì„œë²„ ë¨¼ì €
logout()                         // í´ë¼ì´ì–¸íŠ¸ ë‚˜ì¤‘
window.location.href = '/login'

// âŒ ì˜ëª»ëœ ìˆœì„œ
logout()                         // í´ë¼ì´ì–¸íŠ¸ ë¨¼ì €
await fetch('/api/auth/logout')  // ì„œë²„ ë‚˜ì¤‘ (ì˜ë¯¸ ì—†ìŒ)
```

### 2. window.location.href vs router.push
```typescript
// âœ… ë¡œê·¸ì•„ì›ƒ ì‹œ ì‚¬ìš©
window.location.href = '/login'
// ì´ìœ : ì™„ì „í•œ í˜ì´ì§€ ë¦¬ë¡œë“œë¡œ ëª¨ë“  ìƒíƒœ ì´ˆê¸°í™”

// âŒ ë¡œê·¸ì•„ì›ƒ ì‹œ í”¼í•´ì•¼ í•¨
router.push('/login')
// ì´ìœ : SPA ë¼ìš°íŒ…ìœ¼ë¡œ ì¼ë¶€ ìƒíƒœê°€ ë‚¨ì„ ìˆ˜ ìˆìŒ
```

### 3. ì—ëŸ¬ ì²˜ë¦¬
```typescript
// âœ… ì—ëŸ¬ ë°œìƒí•´ë„ ì‚¬ìš©ì ë³´í˜¸
try {
  await fetch('/api/auth/logout')
} finally {
  logout()  // í•­ìƒ ì‹¤í–‰
}

// âŒ ì—ëŸ¬ ë°œìƒ ì‹œ ì‚¬ìš©ìê°€ ê°‡í˜
try {
  await fetch('/api/auth/logout')
  logout()  // API ì‹¤íŒ¨ ì‹œ ì‹¤í–‰ ì•ˆ ë¨!
}
```

---

## ğŸ“ êµ¬í˜„ ìˆœì„œ

1. âœ… **ë¬¸ì œ ë¶„ì„ ë° ë¬¸ì„œ ì‘ì„±** (ì´ ë¬¸ì„œ)
2. ğŸ”„ **Header.tsx ìˆ˜ì •** - ë¡œê·¸ì•„ì›ƒ í•¸ë“¤ëŸ¬ ê°œì„ 
3. ğŸ§ª **ê°œë°œ ì„œë²„ í…ŒìŠ¤íŠ¸** - ì¿ í‚¤ ì‚­ì œ í™•ì¸
4. ğŸ—ï¸ **ë¹Œë“œ í…ŒìŠ¤íŠ¸** - ì»´íŒŒì¼ ì—ëŸ¬ í™•ì¸
5. âœ… **ì™„ë£Œ**

---

## ğŸ”„ í–¥í›„ ê°œì„  ì‚¬í•­

### 1. Toast ë©”ì‹œì§€ ì¶”ê°€ (ì„ íƒì‚¬í•­)
```typescript
const { toast } = useToast()

const handleLogout = async () => {
  try {
    await fetch('/api/auth/logout', ...)
    toast({
      title: 'ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ',
      description: 'ì•ˆì „í•˜ê²Œ ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.',
    })
  } finally {
    logout()
    window.location.href = '/login'
  }
}
```

### 2. ë¡œë”© ìƒíƒœ í‘œì‹œ (ì„ íƒì‚¬í•­)
```typescript
const [isLoggingOut, setIsLoggingOut] = useState(false)

const handleLogout = async () => {
  setIsLoggingOut(true)
  try {
    await fetch('/api/auth/logout', ...)
  } finally {
    logout()
    window.location.href = '/login'
  }
}
```

### 3. ì „ì—­ ë¡œê·¸ì•„ì›ƒ ìœ í‹¸ë¦¬í‹° (ë¯¸ë˜)
ë‹¤ë¥¸ ê³³ì—ì„œë„ ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ì´ í•„ìš”í•˜ë©´:
```typescript
// lib/utils/auth.ts
export async function handleLogout() {
  try {
    await fetch('/api/auth/logout', { method: 'POST' })
  } finally {
    useAuthStore.getState().logout()
    window.location.href = '/login'
  }
}
```

---

_ì´ ë¬¸ì„œëŠ” ë¡œê·¸ì•„ì›ƒ í›„ ìë™ ì¬ë¡œê·¸ì¸ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë¶„ì„ ë° êµ¬í˜„ ê³„íšì…ë‹ˆë‹¤._
